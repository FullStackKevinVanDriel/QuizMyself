<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C949 - Data Structures & Algorithms I | QuizMyself</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß†</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: #eaeaea; min-height: 100vh; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 30px 0; border-bottom: 1px solid #333; margin-bottom: 30px; }
        h1 { color: #4fc3f7; font-size: 1.6rem; margin-bottom: 8px; }
        .subtitle { color: #888; font-size: 0.9rem; }
        .stats-bar { display: flex; justify-content: space-between; background: #16213e; padding: 15px 20px; border-radius: 10px; margin-bottom: 20px; flex-wrap: wrap; gap: 10px; }
        .stat { text-align: center; }
        .stat-value { font-size: 1.4rem; font-weight: bold; color: #4fc3f7; }
        .stat-label { font-size: 0.75rem; color: #888; }
        .category-filter { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
        .cat-btn { padding: 6px 14px; border-radius: 20px; border: 1px solid #333; background: transparent; color: #ccc; cursor: pointer; font-size: 0.8rem; transition: all 0.2s; }
        .cat-btn:hover, .cat-btn.active { background: #4fc3f7; color: #1a1a2e; border-color: #4fc3f7; }
        .question-card { background: #16213e; border-radius: 12px; padding: 25px; margin-bottom: 20px; }
        .q-number { color: #4fc3f7; font-size: 0.85rem; margin-bottom: 10px; }
        .q-text { font-size: 1.1rem; line-height: 1.6; margin-bottom: 20px; white-space: pre-wrap; }
        .choices { display: flex; flex-direction: column; gap: 10px; }
        .choice { padding: 12px 18px; border-radius: 8px; border: 1px solid #333; background: #1a1a2e; cursor: pointer; transition: all 0.2s; font-size: 0.95rem; }
        .choice:hover { border-color: #4fc3f7; background: #1e2d4a; }
        .choice.correct { border-color: #4caf50; background: #1b3a1b; color: #81c784; }
        .choice.wrong { border-color: #f44336; background: #3a1b1b; color: #ef9a9a; }
        .choice.reveal { border-color: #4caf50; background: #1b3a1b; }
        .choice.disabled { pointer-events: none; }
        .nav-btns { display: flex; gap: 10px; justify-content: center; margin: 20px 0; }
        .btn { padding: 10px 24px; border-radius: 8px; border: none; cursor: pointer; font-size: 0.95rem; font-weight: 600; transition: all 0.2s; }
        .btn-primary { background: #4fc3f7; color: #1a1a2e; }
        .btn-primary:hover { background: #39a8db; }
        .btn-secondary { background: #333; color: #eaeaea; }
        .btn-secondary:hover { background: #444; }
        .progress-bar { width: 100%; height: 6px; background: #333; border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #4fc3f7, #81c784); transition: width 0.3s; border-radius: 3px; }
        .explanation { margin-top: 15px; padding: 12px 16px; background: #1a1a2e; border-left: 3px solid #4fc3f7; border-radius: 0 8px 8px 0; font-size: 0.9rem; color: #aaa; display: none; }
        .explanation.show { display: block; }
        .back-link { display: inline-block; margin-bottom: 20px; color: #4fc3f7; text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
        .mode-toggle { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; }
        .results { text-align: center; padding: 40px 20px; }
        .results h2 { color: #4fc3f7; margin-bottom: 10px; }
        .score { font-size: 3rem; font-weight: bold; margin: 20px 0; }
        .score.pass { color: #4caf50; }
        .score.fail { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to QuizMyself</a>
        <header>
            <h1>üß† C949 - Data Structures & Algorithms I</h1>
            <p class="subtitle">WGU Pre-Assessment Study Guide ‚Ä¢ 70 Questions</p>
        </header>

        <div class="stats-bar" id="stats">
            <div class="stat"><div class="stat-value" id="s-total">70</div><div class="stat-label">Questions</div></div>
            <div class="stat"><div class="stat-value" id="s-answered">0</div><div class="stat-label">Answered</div></div>
            <div class="stat"><div class="stat-value" id="s-correct">0</div><div class="stat-label">Correct</div></div>
            <div class="stat"><div class="stat-value" id="s-pct">0%</div><div class="stat-label">Score</div></div>
        </div>

        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

        <div class="mode-toggle">
            <button class="btn btn-primary" onclick="startPractice()">Practice Mode</button>
            <button class="btn btn-secondary" onclick="startExam()">Exam Mode (70 Q)</button>
            <button class="btn btn-secondary" onclick="resetQuiz()">Reset</button>
        </div>

        <div class="category-filter" id="categories"></div>

        <div id="quiz-area"></div>
    </div>

    <script>
    const questions = [
        { id:1, cat:"OOP Fundamentals", q:"Which term refers to a template for creating an object?", a:"Class", ch:["Application","Class","Method","Algorithm"], c:1 },
        { id:2, cat:"Algorithm Fundamentals", q:"Which characteristic of an algorithm is independent in nature?", a:"Uses an agnostic code repository", ch:["Uses an agnostic code repository","Uses Windows to install the application","Uses Python to implement the algorithm","Uses MySQL for the database needs of the algorithm's application"], c:0 },
        { id:3, cat:"Data Structures", q:"What is referred to as a data structure that stores subitems?", a:"Record", ch:["Array","Matrix","Record","Graph"], c:2 },
        { id:4, cat:"Algorithm Fundamentals", q:"Which factor takes the ability to easily update an algorithm into consideration?", a:"Maintainability", ch:["Feasibility","Scalability","Modularity","Maintainability"], c:3 },
        { id:5, cat:"Algorithm Fundamentals", q:"What is a component of an algorithm that specifies a stopping point?", a:"Finiteness", ch:["Iteration","Looping","Finiteness","Sequencing"], c:2 },
        { id:6, cat:"Search Algorithms", q:"Which term refers to a type of search algorithm?", a:"Linear", ch:["Quicksort","Linear","Divide-and-conquer","Greedy"], c:1 },
        { id:7, cat:"Algorithm Fundamentals", q:"What is a high-level consideration in an algorithm's design?", a:"Simplicity", ch:["Database type","Finiteness","Simplicity","Browser type"], c:2 },
        { id:8, cat:"Search Algorithms", q:"What is the primary method used to search for an item in a sorted array?", a:"Binary search", ch:["Linear search","Exponential search","Binary search","Jump search"], c:2 },
        { id:9, cat:"Algorithm Fundamentals", q:"Which review of an algorithm happens after implementation?", a:"A posteriori analysis", ch:["Binary search","Linear search","A priori analysis","A posteriori analysis"], c:3 },
        { id:10, cat:"Algorithm Fundamentals", q:"Which factor helps measure the reusability of an algorithm?", a:"Extensibility", ch:["User adoption","Flowchart","Correctness","Extensibility"], c:3 },
        { id:11, cat:"Search Algorithms", q:"Which search algorithm utilizes the divide-and-conquer strategy?", a:"Binary search", ch:["Binary search","Linear search","Bubble search","Insertion search"], c:0 },
        { id:12, cat:"Search Algorithms", q:"Which algorithm requires data sorting as its first step?", a:"Binary", ch:["Recursive","Merge","Linear","Binary"], c:3 },
        { id:13, cat:"Complexity Analysis", q:"What does a time complexity analysis of an algorithm include?", a:"Worst case", ch:["Screen load times","Worst case","Efficiency analysis","Memory usage"], c:1 },
        { id:14, cat:"Sorting Algorithms", q:"Which data type do heap sorts work with?", a:"Tree-based data structure", ch:["Tree-based data structure","String","Array","Number"], c:0 },
        { id:15, cat:"Sorting Algorithms", q:"Which function is used in conjunction with a merge sort algorithm?", a:"Recursive", ch:["Do while loop","If statement","For loop","Recursive"], c:3 },
        { id:16, cat:"Recursion", q:"Which attribute of a recursive function makes it unique?", a:"Calls itself", ch:["Uses case statements","Uses for loops","Calls another function","Calls itself"], c:3 },
        { id:17, cat:"Logic & Control Flow", q:"What is x in the following block of logic?\n\nx=28\nIf x >= 10 and x < 20\n  x = 20\nelif x <= 30\n  x = 25\nelif x >= 50\n  x = 100\nelse\n  x = 500", a:"25", ch:["20","25","100","500"], c:1 },
        { id:18, cat:"Logic & Control Flow", q:"What is an if statement inside of an if statement referred to as?", a:"Nested", ch:["Subscript","Double if","Internal","Nested"], c:3 },
        { id:19, cat:"Search Algorithms", q:"Which search algorithm functions by continually dividing the data set in half until the sought item is found or the data set is exhausted?", a:"Binary search", ch:["Linear search","Binary search","Sequential search","Jump search"], c:1 },
        { id:20, cat:"Search Algorithms", q:"Which search algorithm has the best performance when the data set is sorted?", a:"Interval search", ch:["Sequential search","Linear search","Interval search","List search"], c:2 },
        { id:21, cat:"Data Structures", q:"Which term describes a way of organizing, storing, and performing operations on data?", a:"Data structure", ch:["Vertex","Graph","Data structure","Record"], c:2 },
        { id:22, cat:"Data Structures", q:"Which data structure is used to implement a dictionary data type?", a:"Hash table", ch:["Hash table","List","Heap","Queue"], c:0 },
        { id:23, cat:"Abstract Data Types", q:"Which element refers to the numeric positions in a list abstract data type (ADT)?", a:"Indexes", ch:["Priority","Queue","Head","Indexes"], c:3 },
        { id:24, cat:"Abstract Data Types", q:"Which characteristic of a class allows it to be used as an abstract data type (ADT)?", a:"It consists of variables and methods.", ch:["Overloading","Overriding","It consists of variables and methods.","Instantiation"], c:2 },
        { id:25, cat:"Queues", q:"What is the result when 6 is enqueued to the queue 7,9,8 (with 7 as the front)?", a:"7,9,8,6", ch:["6,7,9,8","7,9,8,6","6,7,9","7,9,6"], c:1 },
        { id:26, cat:"Queues", q:"Which value would be returned from executing the dequeue operation on the queue 7,9,8 (with 7 as the front)?", a:"7", ch:["7,9,8","9","7","8"], c:2 },
        { id:27, cat:"Queues", q:"Which queue results from executing the following queue operations on the queue 7,9,8 (with 7 as the front)?\n\nDequeue()\nEnqueue(6)\nEnqueue(5)\nDequeue()", a:"8,6,5", ch:["5,6,7","7,6,5","8,6,5","9,8,6"], c:2 },
        { id:28, cat:"Queues", q:"What will be the new state of the queue 7,9,8 (with 7 as the front) after the enqueue(3) operation?", a:"7,9,8,3", ch:["7,9,8,3","3,7,9,8","3,9,8","7,9,3"], c:0 },
        { id:29, cat:"Hash Tables", q:"Which format is used to store data in a hash table?", a:"Array", ch:["Graph","ArrayList","Doubly linked lists","Array"], c:3 },
        { id:30, cat:"Data Structures", q:"Which term refers to a data structure that groups related items of data together?", a:"Record", ch:["Record","Hash table","Graph","Pointer"], c:0 },
        { id:31, cat:"Hash Tables", q:"Which data structure is used to store unordered items by mapping each item to a location in an array?", a:"Hash table", ch:["Dictionary","Stack","Hash table","List"], c:2 },
        { id:32, cat:"Linked Lists", q:"What is the advantage that a linked list has over an array?", a:"Grows and shrinks as needed", ch:["Grows and shrinks as needed","Faster search time","Less memory needed for each element","Allows for random access"], c:0 },
        { id:33, cat:"Hash Tables", q:"What would be the best data structure for a hash table with simple chaining?", a:"A singly linked list", ch:["An array","A singly linked list","A binary tree","A doubly linked list"], c:1 },
        { id:34, cat:"Trees", q:"How many leaf nodes does this tree have? (Tree: Anne is root, Peter and Zara are children. Peter has child Savannah. Zara and Savannah are leaf nodes.)", a:"Two", ch:["Four","One","Two","Three"], c:2 },
        { id:35, cat:"Trees", q:"What is the root node for this tree? (Tree: Anne is root, Peter and Zara are children. Peter has child Savannah.)", a:"Anne", ch:["Peter","Zara","Anne","Savannah"], c:2 },
        { id:36, cat:"Trees", q:"What is the height of this tree? (Tree: Anne is root ‚Üí Peter, Zara. Peter ‚Üí Savannah. Longest path = 2 edges)", a:"Two", ch:["One","Two","Three","Four"], c:1 },
        { id:37, cat:"Data Structures", q:"Which data structure is the most dynamic in storing data items of varying lengths?", a:"List", ch:["List","String","Char","Tuple"], c:0 },
        { id:38, cat:"Stacks", q:"What is the resulting stack when the push(1) function is implemented on this stack? 8,9,3,5 (top is 8)", a:"1,8,9,3,5", ch:["8,9,3,5,1","8,9,3,5","1,8,9,3,5","8,9,3,1"], c:2 },
        { id:39, cat:"Stacks", q:"What will the peek() operation from this stack return? 8,9,3,5 (top is 8)", a:"8", ch:["4","1","3","8"], c:3 },
        { id:40, cat:"Sets", q:"What is the set that results from set1 intersection set2? set1 = {69,82,47} set2 = {11,82}", a:"{82}", ch:["{82}","{69,82,47,11}","{69,82,47}","{11,82}"], c:0 },
        { id:41, cat:"Graphs", q:"How many vertices does this graph have? (Undirected: vertices 0,1,2,3,4. Edges: 0-1, 0-3, 1-2, 1-3, 2-3, 3-4)", a:"Five", ch:["Four","Two","Three","Five"], c:3 },
        { id:42, cat:"Graphs", q:"What is the adjacency list for node 8? (Directed graph: 7‚Üí8, 3‚Üí8, 8‚Üí9)", a:"7,9,3", ch:["10,7,9,3","10,11,7,9,3","11,7,9,3","7,9,3"], c:3 },
        { id:43, cat:"Complexity Analysis", q:"What is the order of these functions by growth rate? 2/N, 37, 2N, N log(N¬≤), N¬≤", a:"2/N < 37 < N log(N¬≤) < N¬≤ < 2N", ch:["2/N < 37 < N log(N¬≤) < N¬≤ < 2N","2/N < 37 < N¬≤ < 2N < N log(N¬≤)","N log(N¬≤) < 2/N < 37 < N¬≤ < 2N","2/N < N log(N¬≤) < N¬≤ < 2N < 37"], c:0 },
        { id:44, cat:"Search Algorithms", q:"How many elements will be compared to linear search for 27 in [9,3,7,2,8,15,13,35,95,7,4]?", a:"11", ch:["0","10","11","121"], c:2 },
        { id:45, cat:"Search Algorithms", q:"What is the first element visited when binary searching for 7 in [6,7,8,9,11,15,20]?", a:"9", ch:["6","9","11","20"], c:1 },
        { id:46, cat:"Search Algorithms", q:"How many elements in a list of size 64 would be visited when binary searching for a number larger than all values?", a:"6", ch:["3","6","32","64"], c:1 },
        { id:47, cat:"Search Algorithms", q:"How many elements in a list of size 64 would be visited when binary searching for a number smaller than all values?", a:"6", ch:["0","3","6","4"], c:2 },
        { id:48, cat:"Complexity Analysis", q:"What is the runtime complexity of O(N^N + 1)?", a:"Exponential", ch:["Logarithmic","Quadratic","Linear","Exponential"], c:3 },
        { id:49, cat:"Complexity Analysis", q:"What is the runtime complexity for 305 + O(325*N)?", a:"O(N)", ch:["N^325","O(N^N)","O(N^2)","O(N)"], c:3 },
        { id:50, cat:"Complexity Analysis", q:"What is the runtime complexity for this code?\n\nfor x in range(N):\n  for y in range(N):\n    for z in range(N):\n      tot = tot + z\nprint tot", a:"O(N¬≥)", ch:["O(N¬≥)","O(N¬≤)","O(3)","O(N)"], c:0 },
        { id:51, cat:"Abstract Data Types", q:"Which term describes an abstract data type (ADT) that Python uses?", a:"String", ch:["Char","Array","Numeric","String"], c:3 },
        { id:52, cat:"Abstract Data Types", q:"Which ADT is characterized by LIFO (last in, first out)?", a:"Stack", ch:["Stack","Queue","List","Array"], c:0 },
        { id:53, cat:"Queues", q:"Which queue operation removes an item from the front?", a:"dequeue", ch:["peek","dequeue","push","enqueue"], c:1 },
        { id:54, cat:"Python", q:"Which Python function returns the number of times a value is found in a tuple?", a:"count()", ch:["len()","count()","index()","pop()"], c:1 },
        { id:55, cat:"Python", q:"Which Python function finds a specific value in a tuple?", a:"index()", ch:["len()","index()","print()","dict()"], c:1 },
        { id:56, cat:"Python", q:"Which Python list function removes all items from a list?", a:"clear()", ch:["clear()","pop()","extend()","remove()"], c:0 },
        { id:57, cat:"Abstract Data Types", q:"Which ADT allows operations at one end only?", a:"Stack", ch:["List","Queue","Stack","String"], c:2 },
        { id:58, cat:"Python", q:"Which Python list function removes the first instance of the specified element?", a:"remove()", ch:["remove()","stack()","pop()","extend()"], c:0 },
        { id:59, cat:"Sorting Algorithms", q:"How does the insertion sort algorithm sort through a list?", a:"By iterating through the sorted list while placing each value into its correct sorted position", ch:["By performing divide and conquer, separating into two smaller arrays","By comparing the target value to the middle element","By iterating through and placing each value into correct sorted position","By performing an in-place comparison of items"], c:2 },
        { id:60, cat:"Sorting Algorithms", q:"What is the average runtime complexity of merge sort?", a:"O(N*log(N))", ch:["O(N)","O(log(N))","O(N¬≤)","O(N*log(N))"], c:3 },
        { id:61, cat:"Sorting Algorithms", q:"What is the midpoint given quicksort with lowindex=5, highindex=9?\n(43,3,72,18,2,28,51,111,66,71)", a:"7", ch:["6","4","9","7"], c:3 },
        { id:62, cat:"Sorting Algorithms", q:"What is the pivot point given quicksort with lowindex=5, highindex=9?\n(43,3,72,18,2,28,51,111,66,71)", a:"71", ch:["111","28","71","51"], c:2 },
        { id:63, cat:"Python", q:"Which Python tool implements a deque ADT?", a:"Collections", ch:["Robust","Collections","String","Abstraction"], c:1 },
        { id:64, cat:"Python", q:"Which Python function deletes one item on the right side of a deque?", a:"pop()", ch:["insert()","pop()","index()","extend()"], c:1 },
        { id:65, cat:"Linked Lists", q:"Which function determines that a linked list contains no data?", a:"IsEmpty()", ch:["IsEmpty()","put()","peek()","insert()"], c:0 },
        { id:66, cat:"OOP Fundamentals", q:"What are classes composed of that perform the actions of an application?", a:"Methods", ch:["JSON","Methods","Databases","XML"], c:1 },
        { id:67, cat:"Logic & Control Flow", q:"Which loop type will always execute at least once?", a:"Do while", ch:["Do while","For","While","Foreach"], c:0 },
        { id:68, cat:"OOP Fundamentals", q:"How would a strongly typed language create an integer variable?", a:"int myVar", ch:["let big: number = 0","String myVar","Var myVar","int myVar"], c:3 },
        { id:69, cat:"Logic & Control Flow", q:"Which component of a case statement is the fallback when no parameters are met?", a:"Default", ch:["Break","Default","Else","Continue"], c:1 },
        { id:70, cat:"OOP Fundamentals", q:"Which operator is a type of assignment operator?", a:"+=", ch:["+","||","+=","=="], c:2 }
    ];

    // State
    let state = { current: 0, answered: 0, correct: 0, mode: 'practice', activeQ: [], answers: {}, filter: null };
    const STORAGE_KEY = 'c949-quiz-state';

    // Load saved state
    function loadState() {
        try {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) { Object.assign(state, JSON.parse(saved)); }
        } catch(e) {}
    }

    function saveState() {
        try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); } catch(e) {}
    }

    // Categories
    function initCategories() {
        const cats = [...new Set(questions.map(q => q.cat))].sort();
        const el = document.getElementById('categories');
        el.innerHTML = `<button class="cat-btn active" onclick="filterCat(null)">All (${questions.length})</button>` +
            cats.map(c => {
                const count = questions.filter(q => q.cat === c).length;
                return `<button class="cat-btn" onclick="filterCat('${c.replace(/'/g,"\\'")}')"">${c} (${count})</button>`;
            }).join('');
    }

    function filterCat(cat) {
        state.filter = cat;
        state.activeQ = cat ? questions.filter(q => q.cat === cat) : [...questions];
        state.current = 0;
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        renderQuestion();
    }

    function startPractice() {
        state.mode = 'practice';
        state.activeQ = state.filter ? questions.filter(q => q.cat === state.filter) : [...questions];
        state.activeQ.sort(() => Math.random() - 0.5);
        state.current = 0;
        renderQuestion();
    }

    function startExam() {
        state.mode = 'exam';
        state.activeQ = [...questions].sort(() => Math.random() - 0.5);
        state.current = 0;
        state.answered = 0;
        state.correct = 0;
        state.answers = {};
        updateStats();
        renderQuestion();
    }

    function resetQuiz() {
        state = { current: 0, answered: 0, correct: 0, mode: 'practice', activeQ: [...questions], answers: {}, filter: null };
        localStorage.removeItem(STORAGE_KEY);
        updateStats();
        initCategories();
        renderQuestion();
    }

    function renderQuestion() {
        const area = document.getElementById('quiz-area');
        if (state.current >= state.activeQ.length) {
            if (state.mode === 'exam') {
                const pct = Math.round((state.correct / questions.length) * 100);
                area.innerHTML = `<div class="results"><h2>Exam Complete!</h2><div class="score ${pct >= 70 ? 'pass' : 'fail'}">${pct}%</div><p>${state.correct}/${questions.length} correct</p><p style="margin-top:10px;color:#888">${pct >= 70 ? '‚úÖ You would pass!' : '‚ùå Need 70% to pass. Keep studying!'}</p></div>`;
            } else {
                area.innerHTML = `<div class="results"><h2>All done!</h2><p>You've gone through all questions in this set.</p><br><button class="btn btn-primary" onclick="startPractice()">Shuffle & Restart</button></div>`;
            }
            return;
        }
        const q = state.activeQ[state.current];
        const answered = state.answers[q.id] !== undefined;
        const selected = state.answers[q.id];

        area.innerHTML = `
            <div class="question-card">
                <div class="q-number">Question ${state.current + 1} of ${state.activeQ.length} ¬∑ ${q.cat}</div>
                <div class="q-text">${escapeHtml(q.q)}</div>
                <div class="choices">
                    ${q.ch.map((ch, i) => {
                        let cls = 'choice';
                        if (answered) {
                            cls += ' disabled';
                            if (i === q.c) cls += ' correct';
                            else if (i === selected) cls += ' wrong';
                        }
                        return `<div class="${cls}" onclick="answer(${q.id},${i})">${String.fromCharCode(65+i)}) ${escapeHtml(ch)}</div>`;
                    }).join('')}
                </div>
                <div class="explanation ${answered ? 'show' : ''}">‚úÖ Correct answer: <strong>${escapeHtml(q.a)}</strong></div>
            </div>
            <div class="nav-btns">
                ${state.current > 0 ? '<button class="btn btn-secondary" onclick="prev()">‚Üê Previous</button>' : ''}
                <button class="btn btn-primary" onclick="next()">Next ‚Üí</button>
            </div>`;
    }

    function answer(qid, choice) {
        if (state.answers[qid] !== undefined) return;
        const q = questions.find(x => x.id === qid);
        state.answers[qid] = choice;
        state.answered++;
        if (choice === q.c) state.correct++;
        updateStats();
        saveState();
        renderQuestion();
    }

    function next() { state.current++; renderQuestion(); }
    function prev() { state.current--; renderQuestion(); }

    function updateStats() {
        document.getElementById('s-answered').textContent = state.answered;
        document.getElementById('s-correct').textContent = state.correct;
        const pct = state.answered > 0 ? Math.round((state.correct / state.answered) * 100) : 0;
        document.getElementById('s-pct').textContent = pct + '%';
        document.getElementById('progress').style.width = (state.answered / questions.length * 100) + '%';
    }

    function escapeHtml(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/\n/g,'<br>'); }

    // Init
    loadState();
    initCategories();
    state.activeQ = [...questions];
    updateStats();
    renderQuestion();
    </script>
</body>
</html>
